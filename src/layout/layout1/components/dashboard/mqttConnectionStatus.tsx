import { AnimatePresence, motion } from "framer-motion"
import React from "react"
import { useSelector } from "react-redux"

interface mqttConnectionStatus {
  status: string
}

const MqttConnectionStatus = ({ status }: mqttConnectionStatus) => {
  const mqttStatus = useSelector((state: any) => state.Chat.setMqttStatus)
  return (
    <AnimatePresence>
      {status !== "" && (
        <motion.div
          key="topbarStatus"
          initial={{ opacity: 0, translateY: "-40px" }}
          animate={{
            opacity: 1,
            backgroundColor:
              mqttStatus === "mqtt_offline"
                ? "#F74B14"
                : mqttStatus === "mqtt_reconnect"
                ? "#F7931F"
                : "#76B947",
            translateY: "0px",
            transition: {
              duration: 0.5,
            },
          }}
          exit={{
            opacity: 0,
            translateY: "-40px",
            transition: { duration: 0.5 },
          }}
          className={`mqttStatus  z-[500] text-[white] text-[15px] flex gap-2 justify-center items-center h-full w-full 3xl:w-[calc(100%-1412px)]  relative`}
        >
          {mqttStatus === "mqtt_offline" ? (
            <svg
              width="18"
              height="15"
              viewBox="0 0 18 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0.72892 0.0952785C0.534881 -0.0570324 0.250854 -0.0231855 0.0961853 0.171434C-0.058483 0.366053 -0.0219251 0.650931 0.172113 0.806063L17.27 14.3448C17.464 14.4999 17.7481 14.4661 17.9027 14.2715C18.0574 14.0769 18.0237 13.792 17.8296 13.6368L0.72892 0.0952785ZM17.9983 9.92779C17.9983 8.54289 17.2194 7.33851 16.0776 6.73491C16.1564 6.45849 16.1986 6.16797 16.1986 5.86617C16.1986 4.12023 14.7897 2.70713 13.049 2.70713C12.5653 2.70713 12.1069 2.81713 11.6991 3.01175C10.802 1.73403 9.32286 0.901962 7.64963 0.901962C6.65131 0.901962 5.72049 1.19812 4.94434 1.70865L5.69799 2.30661C6.2773 1.98788 6.94097 1.80455 7.64963 1.80455C9.01915 1.80455 10.2284 2.4843 10.9623 3.53074C11.2154 3.88895 11.6879 4.01587 12.0844 3.8269C12.374 3.68869 12.7003 3.60971 13.049 3.60971C14.2919 3.60971 15.2987 4.61948 15.2987 5.86617C15.2987 6.08335 15.2677 6.28925 15.2143 6.48669C15.099 6.89568 15.2846 7.33287 15.6586 7.53313C16.5163 7.98724 17.0985 8.88982 17.0985 9.92779C17.0985 10.3537 17 10.757 16.8257 11.1181L17.5456 11.6878C17.8324 11.166 17.9983 10.5652 17.9983 9.92779ZM2.84928 4.6505C2.76773 4.96923 2.71992 5.30206 2.70586 5.64334C1.13106 6.20182 0.000572144 7.70518 0.000572144 9.4765C0.000572144 11.7189 1.81441 13.5381 4.05007 13.5381H14.0726L12.9337 12.6355H4.05007C2.30935 12.6355 0.900461 11.2224 0.900461 9.4765C0.900461 8.10006 1.77785 6.92953 3.00395 6.49516C3.34985 6.37387 3.58888 6.05233 3.60294 5.68283C3.60856 5.54462 3.62262 5.40924 3.64231 5.27667L2.84928 4.6505Z"
                fill="white"
              />
            </svg>
          ) : mqttStatus === "mqtt_reconnect" ? (
            <svg
              width="19"
              height="13"
              viewBox="0 0 19 13"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.4631 2.62386C10.7291 1.57938 9.51969 0.900896 8.15 0.900896C5.97312 0.900896 4.19844 2.61823 4.10281 4.77194C4.08594 5.13793 3.84969 5.45887 3.50375 5.58274C2.2775 6.0163 1.4 7.18465 1.4 8.55852C1.4 10.3012 2.80906 11.7117 4.55 11.7117H14.9C16.3906 11.7117 17.6 10.5011 17.6 9.00896C17.6 7.97293 17.0178 7.07204 16.16 6.61877C15.7831 6.41889 15.5975 5.98533 15.7156 5.5743C15.7719 5.38004 15.8 5.17171 15.8 4.95493C15.8 3.71057 14.7931 2.70269 13.55 2.70269C13.2041 2.70269 12.8778 2.78152 12.5853 2.91947C12.1888 3.10809 11.7162 2.98422 11.4631 2.62386ZM8.15 0C9.82344 0 11.3028 0.830514 12.2 2.10585C12.6078 1.91159 13.0662 1.80179 13.55 1.80179C15.2909 1.80179 16.7 3.21226 16.7 4.95493C16.7 5.25617 16.6578 5.54614 16.5791 5.82204C17.7209 6.42452 18.5 7.62665 18.5 9.00896C18.5 10.9994 16.8884 12.6126 14.9 12.6126H4.55C2.31406 12.6126 0.5 10.7967 0.5 8.55852C0.5 6.79051 1.63062 5.28995 3.20562 4.73252C3.32094 2.10022 5.48938 0 8.15 0ZM6.93219 5.98815L9.18219 3.7359C9.35656 3.56136 9.64344 3.56136 9.81781 3.7359L12.0678 5.98815C12.2422 6.16269 12.2422 6.44986 12.0678 6.6244C11.8934 6.79895 11.6066 6.79895 11.4322 6.6244L9.95 5.14074V9.45941C9.95 9.70716 9.7475 9.90986 9.5 9.90986C9.2525 9.90986 9.05 9.70716 9.05 9.45941V5.14074L7.56781 6.6244C7.39344 6.79895 7.10656 6.79895 6.93219 6.6244C6.75781 6.44986 6.75781 6.16269 6.93219 5.98815Z"
                fill="white"
              />
            </svg>
          ) : (
            <svg
              width="20"
              height="14"
              viewBox="0 0 20 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12.1812 2.9125C11.3656 1.75312 10.0219 1 8.5 1C6.08125 1 4.10938 2.90625 4.00313 5.29688C3.98438 5.70312 3.72188 6.05938 3.3375 6.19688C1.975 6.67812 1 7.975 1 9.5C1 11.4344 2.56562 13 4.5 13H16C17.6562 13 19 11.6562 19 10C19 8.85 18.3531 7.85 17.4 7.34688C16.9812 7.125 16.775 6.64375 16.9062 6.1875C16.9688 5.97188 17 5.74062 17 5.5C17 4.11875 15.8813 3 14.5 3C14.1156 3 13.7531 3.0875 13.4281 3.24062C12.9875 3.45 12.4625 3.3125 12.1812 2.9125ZM8.5 0C10.3594 0 12.0031 0.921875 13 2.3375C13.4531 2.12188 13.9625 2 14.5 2C16.4344 2 18 3.56562 18 5.5C18 5.83437 17.9531 6.15625 17.8656 6.4625C19.1344 7.13125 20 8.46562 20 10C20 12.2094 18.2094 14 16 14H4.5C2.01562 14 0 11.9844 0 9.5C0 7.5375 1.25625 5.87188 3.00625 5.25313C3.13437 2.33125 5.54375 0 8.5 0ZM13.3531 6.35313L9.35312 10.3531C9.15937 10.5469 8.84063 10.5469 8.64688 10.3531L6.64687 8.35312C6.45312 8.15937 6.45312 7.84063 6.64687 7.64688C6.84062 7.45313 7.15938 7.45313 7.35313 7.64688L9 9.29375L12.6469 5.64687C12.8406 5.45312 13.1594 5.45312 13.3531 5.64687C13.5469 5.84062 13.5469 6.15938 13.3531 6.35313Z"
                fill="white"
              />
            </svg>
          )}
          {mqttStatus === "mqtt_offline" ? (
            <div className=" flex sm:flex-col 2xl:flex-row  2xl:gap-3">
              Connection lost
              <div
                className="text-[11px] cursor-pointer underline 2xl:mt-1 "
                onClick={() => window.location.reload()}
              >
                Refresh
              </div>
            </div>
          ) : mqttStatus === "mqtt_reconnect" ? (
            "Reconnecting..."
          ) : (
            "Connected"
          )}
        </motion.div>
      )}
    </AnimatePresence>
  )
}

export default MqttConnectionStatus
