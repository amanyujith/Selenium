import { useDispatch, useSelector } from "react-redux"
import AudioVideoDropdown from "../../audioVideoDropdown/audioVideoDropdown"
import { memo, useEffect, useState } from "react"
import { actionCreators } from "../../../../../store"
import { t } from "i18next"
import { motion } from "framer-motion"

const ShareOptions = (props: any) => {
  const maxTileinSlider = useSelector(
    (state: any) => state.Main.maxTileinSlider
  )
  const dispatch = useDispatch()
  const participantList = useSelector(
    (state: any) => state.Main.participantList
  )
  const whiteBoardState = useSelector(
    (state: any) => state.Main.whiteBoardState
  )
  const participantID = useSelector(
    (state: any) => state.Main.selfParticipantID
  )
  const fileShareModalState = useSelector(
    (state: any) => state.Main.fileShareModalState
  )
  const fileShareState = useSelector((state: any) => state.Main.fileShareState)
  const themePalette = useSelector((state: any) => state.Main.themePalette)

  const [selfTileData, setSelfTileData] = useState<any>(null)
  useEffect(() => {}, [selfTileData])
  useEffect(() => {
    const data = [...participantList].find((participant: any) => {
      return participant.isPublisher === true
    })
    setSelfTileData({ ...data })
  }, [participantList])

  const handleFileShare = () => {
    const state = { ...fileShareState }
    state.modalState = true
    dispatch(actionCreators.setFileShareState(state))
  }

  return (
    <motion.div
      key="ShareOptions"
      initial={props.isCall ? {} : { scale: 0 }}
      animate={{
        scale: 1,
        transition: { duration: 0.3, ease: "easeOut" },
      }}
      exit={
        props.isCall
          ? {}
          : {
              scale: 0,
              transition: { duration: 0.3, ease: "easeOut" },
            }
      }
      className={`origin-bottom-left flex flex-col w-[180px] rounded-[3px] p-0.5 py-2.5 text-left shadow-[0_4px_4px_0px_rgba(0,0,0,0.25)] bg-[${themePalette?.primary300}] bg-opacity-[90]`}
      style={{ backgroundColor: themePalette.primary300 }}
    >
      {/* <div className='flex items-center px-2.5 py-1 rounded-[3px] mx-0.5 mt-0.5 hover:bg-[#ffffff] hover:bg-opacity-10'>
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M8 4.75C7.35721 4.75 6.72886 4.94061 6.1944 5.29772C5.65994 5.65484 5.24338 6.16242 4.99739 6.75628C4.75141 7.35014 4.68705 8.00361 4.81245 8.63404C4.93785 9.26448 5.24738 9.84358 5.7019 10.2981C6.15642 10.7526 6.73552 11.0622 7.36596 11.1876C7.99639 11.313 8.64986 11.2486 9.24372 11.0026C9.83758 10.7566 10.3452 10.3401 10.7023 9.8056C11.0594 9.27114 11.25 8.64279 11.25 8C11.25 7.13805 10.9076 6.3114 10.2981 5.7019C9.6886 5.09241 8.86195 4.75 8 4.75ZM8 8.75C7.85166 8.75 7.70666 8.70601 7.58332 8.6236C7.45999 8.54119 7.36386 8.42406 7.30709 8.28701C7.25032 8.14997 7.23547 7.99917 7.26441 7.85368C7.29335 7.7082 7.36478 7.57456 7.46967 7.46967C7.57456 7.36478 7.7082 7.29335 7.85368 7.26441C7.99917 7.23547 8.14997 7.25032 8.28701 7.30709C8.42406 7.36386 8.54119 7.45999 8.6236 7.58332C8.70601 7.70666 8.75 7.85166 8.75 8C8.75 8.19891 8.67098 8.38968 8.53033 8.53033C8.38968 8.67098 8.19891 8.75 8 8.75ZM8 0.25C3.71875 0.25 0.25 3.71875 0.25 8C0.25 12.2812 3.71875 15.75 8 15.75C12.2812 15.75 15.75 12.2812 15.75 8C15.75 3.71875 12.2812 0.25 8 0.25ZM8 12C7.20887 12 6.43552 11.7654 5.77772 11.3259C5.11992 10.8864 4.60723 10.2616 4.30448 9.53073C4.00173 8.79983 3.92252 7.99556 4.07686 7.21964C4.2312 6.44371 4.61216 5.73098 5.17157 5.17157C5.73098 4.61216 6.44371 4.2312 7.21964 4.07686C7.99556 3.92252 8.79983 4.00173 9.53073 4.30448C10.2616 4.60723 10.8864 5.11992 11.3259 5.77772C11.7654 6.43552 12 7.20887 12 8C12 9.06087 11.5786 10.0783 10.8284 10.8284C10.0783 11.5786 9.06087 12 8 12Z" fill="#A7A9AB" />
        </svg>
        <span className='mx-5 text-sm leading-4 text-[#FFFFFF]'>Record</span>
      </div> */}
      <div
        id="screenShareMeetings"
        className="flex items-center px-2.5 py-1 rounded-[3px] mx-0.5 mt-0.5 hover:bg-[#ffffff] hover:bg-opacity-10 "
        onClick={selfTileData?.screenshare ? "" : props.handleScreenshare}
      >
        {selfTileData?.screenshare ? (
          <>
            <svg
              width="16"
              height="14"
              viewBox="0 0 16 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.28125 8.53672H6.40625V7.03672C6.40625 6.77422 6.5 6.55222 6.6875 6.37072C6.875 6.18972 7.09375 6.09922 7.34375 6.09922H8.84375V7.33672L10.6625 5.53672L8.84375 3.73672V4.97422H7.34375C6.78125 4.97422 6.297 5.17422 5.891 5.57422C5.4845 5.97422 5.28125 6.46172 5.28125 7.03672V8.53672ZM0.59375 13.168C0.44375 13.168 0.3125 13.115 0.2 13.009C0.0875 12.9025 0.03125 12.768 0.03125 12.6055C0.03125 12.443 0.0875 12.3087 0.2 12.2027C0.3125 12.0962 0.44375 12.043 0.59375 12.043H15.4062C15.5562 12.043 15.6875 12.0962 15.8 12.2027C15.9125 12.3087 15.9688 12.443 15.9688 12.6055C15.9688 12.768 15.9125 12.9025 15.8 13.009C15.6875 13.115 15.5562 13.168 15.4062 13.168H0.59375ZM2.225 11.293C1.85 11.293 1.53125 11.1617 1.26875 10.8992C1.00625 10.6367 0.875 10.318 0.875 9.94297V2.16172C0.875 1.77422 1.00625 1.44922 1.26875 1.18672C1.53125 0.924219 1.85 0.792969 2.225 0.792969H13.775C14.15 0.792969 14.4688 0.924219 14.7313 1.18672C14.9938 1.44922 15.125 1.77422 15.125 2.16172V9.94297C15.125 10.318 14.9938 10.6367 14.7313 10.8992C14.4688 11.1617 14.15 11.293 13.775 11.293H2.225Z"
                fill="#ffffff1f"
              />
            </svg>
            <span className="mx-3 text-sm  text-[#ffffff1f]">
              {t("Meeting.ScreenShare")}
            </span>
          </>
        ) : (
          <>
            <svg
              width="16"
              height="14"
              viewBox="0 0 16 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.28125 8.53672H6.40625V7.03672C6.40625 6.77422 6.5 6.55222 6.6875 6.37072C6.875 6.18972 7.09375 6.09922 7.34375 6.09922H8.84375V7.33672L10.6625 5.53672L8.84375 3.73672V4.97422H7.34375C6.78125 4.97422 6.297 5.17422 5.891 5.57422C5.4845 5.97422 5.28125 6.46172 5.28125 7.03672V8.53672ZM0.59375 13.168C0.44375 13.168 0.3125 13.115 0.2 13.009C0.0875 12.9025 0.03125 12.768 0.03125 12.6055C0.03125 12.443 0.0875 12.3087 0.2 12.2027C0.3125 12.0962 0.44375 12.043 0.59375 12.043H15.4062C15.5562 12.043 15.6875 12.0962 15.8 12.2027C15.9125 12.3087 15.9688 12.443 15.9688 12.6055C15.9688 12.768 15.9125 12.9025 15.8 13.009C15.6875 13.115 15.5562 13.168 15.4062 13.168H0.59375ZM2.225 11.293C1.85 11.293 1.53125 11.1617 1.26875 10.8992C1.00625 10.6367 0.875 10.318 0.875 9.94297V2.16172C0.875 1.77422 1.00625 1.44922 1.26875 1.18672C1.53125 0.924219 1.85 0.792969 2.225 0.792969H13.775C14.15 0.792969 14.4688 0.924219 14.7313 1.18672C14.9938 1.44922 15.125 1.77422 15.125 2.16172V9.94297C15.125 10.318 14.9938 10.6367 14.7313 10.8992C14.4688 11.1617 14.15 11.293 13.775 11.293H2.225Z"
                fill="#A7A9AB"
              />
            </svg>
            <span className="mx-3 text-sm text-[#FFFFFF]">
              {t("Meeting.ScreenShare")}
            </span>
          </>
        )}
      </div>

      {/* <div
        className="flex items-center px-2.5 py-1 rounded-[3px] mx-0.5 mt-0.5 hover:bg-[#FFFFFF] hover:bg-opacity-10 "
        onClick={handleFileShare}
      >
       
        <svg
          width="16"
          height="12"
          viewBox="0 0 16 12"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.225 11.625C1.85 11.625 1.53125 11.4938 1.26875 11.2313C1.00625 10.9688 0.875 10.65 0.875 10.275V2.025C0.875 1.6375 1.00625 1.3125 1.26875 1.05C1.53125 0.7875 1.85 0.65625 2.225 0.65625H6.78125L8 1.875H13.775C14.15 1.875 14.4688 2.00625 14.7313 2.26875C14.9938 2.53125 15.125 2.85 15.125 3.225V10.275C15.125 10.65 14.9938 10.9688 14.7313 11.2313C14.4688 11.4938 14.15 11.625 13.775 11.625H2.225Z"
            fill="#A7A9AB"
          />
        </svg>
        <span className="mx-3 text-sm text-[#FFFFFF]">Files</span>
    
      </div> */}
      {/**Whiteboard button start */}
      {!props.isCall && (
        <div
          id="whiteboardMeeting"
          className={`flex ${
            whiteBoardState !== participantID &&
            whiteBoardState !== "" &&
            participantList.some(
              (participant: any) =>
                participant.participant_id === whiteBoardState
            ) &&
            "cursor-not-allowed"
          }items-center px-2.5 py-1 rounded-[3px] mx-0.5 mt-0.5 hover:bg-[#ffffff] hover:bg-opacity-10 `}
          onClick={() => {
            dispatch(actionCreators.setWhiteBoardModal(true))
            dispatch(actionCreators.setPopUp("closeAll"))
          }}
        >
          <>
            <svg
              width="16"
              height="14"
              viewBox="0 0 16 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M8.5 13.5625C8.3375 13.5625 8.20325 13.5095 8.09725 13.4035C7.99075 13.297 7.9375 13.1625 7.9375 13C7.9375 12.8375 7.99075 12.703 8.09725 12.5965C8.20325 12.4905 8.3375 12.4375 8.5 12.4375C9.15 12.4375 9.71875 12.3063 10.2062 12.0438C10.6937 11.7812 10.9375 11.475 10.9375 11.125C10.9375 10.875 10.8187 10.65 10.5812 10.45C10.3438 10.25 10.0188 10.0813 9.60625 9.94375L10.45 9.1C10.9625 9.325 11.3595 9.60625 11.641 9.94375C11.922 10.2812 12.0625 10.675 12.0625 11.125C12.0625 11.8875 11.6875 12.4842 10.9375 12.9152C10.1875 13.3467 9.375 13.5625 8.5 13.5625ZM1.84375 7.975C1.39375 7.7625 1.047 7.5155 0.8035 7.234C0.5595 6.953 0.4375 6.625 0.4375 6.25C0.4375 5.775 0.622 5.37175 0.991 5.04025C1.3595 4.70925 2.025 4.33125 2.9875 3.90625C3.7875 3.54375 4.3125 3.27175 4.5625 3.09025C4.8125 2.90925 4.9375 2.7125 4.9375 2.5C4.9375 2.25 4.79375 2.03125 4.50625 1.84375C4.21875 1.65625 3.8 1.5625 3.25 1.5625C2.9125 1.5625 2.622 1.60625 2.3785 1.69375C2.1345 1.78125 1.91875 1.91875 1.73125 2.10625C1.63125 2.21875 1.50625 2.28425 1.35625 2.30275C1.20625 2.32175 1.06875 2.28125 0.94375 2.18125C0.81875 2.08125 0.747 1.95625 0.7285 1.80625C0.7095 1.65625 0.75625 1.51875 0.86875 1.39375C1.08125 1.13125 1.40325 0.90625 1.83475 0.71875C2.26575 0.53125 2.7375 0.4375 3.25 0.4375C4.0875 0.4375 4.76575 0.628 5.28475 1.009C5.80325 1.3905 6.0625 1.8875 6.0625 2.5C6.0625 2.95 5.8875 3.35625 5.5375 3.71875C5.1875 4.08125 4.4875 4.4875 3.4375 4.9375C2.6875 5.2625 2.1875 5.5155 1.9375 5.6965C1.6875 5.878 1.5625 6.0625 1.5625 6.25C1.5625 6.4125 1.6595 6.56875 1.8535 6.71875C2.047 6.86875 2.33125 7.00625 2.70625 7.13125L1.84375 7.975ZM11.8937 5.3125L9.34375 2.7625L10.0563 2.03125C10.3063 1.78125 10.597 1.65625 10.9285 1.65625C11.2595 1.65625 11.5437 1.78125 11.7812 2.03125L12.625 2.875C12.875 3.1125 13 3.39675 13 3.72775C13 4.05925 12.875 4.35 12.625 4.6L11.8937 5.3125ZM1.31875 13.3375V10.7875L8.18125 3.90625L10.75 6.475L3.86875 13.3375H1.31875Z"
                fill="#A7A9AB"
              />
            </svg>
            <span className="mx-3 text-sm text-[#FFFFFF]">
              {t("Meeting.WhiteBoard")}
            </span>
          </>
        </div>
      )}

      {/**Whiteboard button end */}
      {/* <div className='flex items-center px-2.5 py-1 rounded-[3px] mx-0.5 mt-0.5 hover:bg-[#ffffff] hover:bg-opacity-10'>
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M15.2313 9.86644L13.9 9.09769C14.0344 8.37269 14.0344 7.62894 13.9 6.90394L15.2313 6.13519C15.3844 6.04769 15.4531 5.86644 15.4031 5.69769C15.0563 4.58519 14.4656 3.57894 13.6938 2.74144C13.575 2.61331 13.3813 2.58206 13.2313 2.66956L11.9 3.43831C11.3406 2.95706 10.6969 2.58519 10 2.34144V0.80706C10 0.63206 9.87813 0.478936 9.70625 0.441436C8.55938 0.185186 7.38438 0.197686 6.29376 0.441436C6.12188 0.478936 6.00001 0.63206 6.00001 0.80706V2.34456C5.30626 2.59144 4.66251 2.96331 4.1 3.44144L2.77188 2.67269C2.61875 2.58519 2.42813 2.61331 2.30938 2.74456C1.53751 3.57894 0.94688 4.58519 0.600005 5.70081C0.54688 5.86956 0.618755 6.05081 0.77188 6.13831L2.10313 6.90706C1.96876 7.63206 1.96876 8.37581 2.10313 9.10081L0.77188 9.86956C0.618755 9.95706 0.550005 10.1383 0.600005 10.3071C0.94688 11.4196 1.53751 12.4258 2.30938 13.2633C2.42813 13.3914 2.62188 13.4227 2.77188 13.3352L4.10313 12.5664C4.66251 13.0477 5.30626 13.4196 6.00313 13.6633V15.2008C6.00313 15.3758 6.12501 15.5289 6.29688 15.5664C7.44376 15.8227 8.61876 15.8102 9.70938 15.5664C9.88126 15.5289 10.0031 15.3758 10.0031 15.2008V13.6633C10.6969 13.4164 11.3406 13.0446 11.9031 12.5664L13.2344 13.3352C13.3875 13.4227 13.5781 13.3946 13.6969 13.2633C14.4688 12.4289 15.0594 11.4227 15.4063 10.3071C15.4531 10.1352 15.3844 9.95394 15.2313 9.86644ZM8.00001 10.5008C6.62188 10.5008 5.50001 9.37894 5.50001 8.00081C5.50001 6.62269 6.62188 5.50081 8.00001 5.50081C9.37813 5.50081 10.5 6.62269 10.5 8.00081C10.5 9.37894 9.37813 10.5008 8.00001 10.5008Z" fill="#A7A9AB" />
        </svg>
        <span className='mx-5 text-sm leading-4 text-[#FFFFFF]'>Settings</span>
      </div> */}
    </motion.div>
  )
}

export default memo(ShareOptions)
