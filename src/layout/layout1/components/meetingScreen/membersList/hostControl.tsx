import React, { memo } from "react"
import { useDispatch, useSelector } from "react-redux"
import ModalData from "../../../../../constructors/modal/modalData"
import { actionCreators } from "../../../../../store"
import { t } from "i18next"

const HostControl = (props: any) => {
  const { participant, handlePrivateChat } = props
  const dispatch = useDispatch()
  const meetingSession = useSelector((state: any) => state.Main.meetingSession)

  const handleKickOut = (participantId: any) => {
    const kickOutParticipant = () => {
      if (!participantId.includes("Bot"))
          console.log("modal1", modal);
        meetingSession.hostRemoveParticipant(participantId)
    }

    let modal = new ModalData({
      message: t("Meeting.RemoveMsg"),
      type: "HostMessage",
      closeButton: true,
      buttons: [
        { buttonName: t("No") },
        { buttonName: t("Yes"), callback: kickOutParticipant },
      ],
    })
    console.log("modal2", modal);
    dispatch(actionCreators.addModal(modal))
  }
  const handleParticipantMic = (id: string, stop: boolean) => {
    if (!id.includes("Bot"))
      meetingSession.hostManageParticipantStream(id, stop, "audio")
  }
  const handleParticipantCam = (id: string, stop: boolean) => {
    if (!id.includes("Bot"))
      meetingSession.hostManageParticipantStream(id, stop, "video")
  }
  const handleRaiseHand = (id: string) => {
    meetingSession.hostManageRaiseHand(id)
  }

  return (
    <div
      onClick={(e) => e.stopPropagation()}
      className=" absolute bg-[#ffffff] right-0 top-[44px] border border-[#000000]/[0.12] shadow-[0_4px_4px_0px_rgba(0,0,0,0.25)] rounded-[3px] box-border py-1.5"
    >
      <div className="flex justify-between items-center pl-3 pr-2.5">
        {/* <span className='text-xs w-3/4 text-left overflow-hidden whitespace-nowrap text-ellipsis'>{participant.name}</span> */}
        <svg
          className="cursor-pointer"
          onClick={() => handleKickOut(participant.participant_id)}
          width="14"
          height="13"
          viewBox="0 0 14 13"
          fill="none"
        >
          <path
            d="M13.5898 7.03789L8.99609 11.985C8.58594 12.4267 7.875 12.1175 7.875 11.4844V8.65748H4.15625C3.79258 8.65748 3.5 8.34239 3.5 7.95075V5.12382C3.5 4.73218 3.79258 4.41709 4.15625 4.41709H7.875V1.59017C7.875 0.960001 8.5832 0.647862 8.99609 1.08957L13.5898 6.03668C13.8441 6.31349 13.8441 6.76108 13.5898 7.03789ZM5.25 11.8378V10.6599C5.25 10.4655 5.10234 10.3065 4.92187 10.3065H2.625C2.14102 10.3065 1.75 9.88542 1.75 9.36421V3.71036C1.75 3.18915 2.14102 2.76805 2.625 2.76805H4.92187C5.10234 2.76805 5.25 2.60904 5.25 2.41469V1.2368C5.25 1.04245 5.10234 0.883439 4.92187 0.883439H2.625C1.17578 0.883439 0 2.14966 0 3.71036V9.36421C0 10.9249 1.17578 12.1911 2.625 12.1911H4.92187C5.10234 12.1911 5.25 12.0321 5.25 11.8378Z"
            fill="#F75E1D"
          />
        </svg>
        {/* onClick={(e) => { props.setHostControlMenu("", e) }} */}
      </div>
      {/* <div className='flex justify-between px-2.5 mt-2.5 items-center '> */}
      {/* <svg width="16" height="18" viewBox="0 0 16 18" fill="none">
                    <path d="M10.75 11.54H15V2.65535C15 2.20775 14.6656 1.84766 14.25 1.84766H1.75C1.33437 1.84766 1 2.20775 1 2.65535V16.1169C1 16.5645 1.33437 16.9246 1.75 16.9246H10V12.3477C10 11.9034 10.3375 11.54 10.75 11.54ZM14.7812 13.3909L11.7188 16.689C11.5781 16.8404 11.3875 16.9246 11.1875 16.9246H11V12.6169H15V12.8222C15 13.0342 14.9219 13.2395 14.7812 13.3909Z" fill="#A7A9AB" />
                </svg> */}
      {/* <svg width="17" height="14" viewBox="0 0 17 14" fill="none">
                    <path d="M13.4002 12.1883H3.0002C2.7802 12.1883 2.6002 12.3683 2.6002 12.5883V13.3883C2.6002 13.6083 2.7802 13.7883 3.0002 13.7883H13.4002C13.6202 13.7883 13.8002 13.6083 13.8002 13.3883V12.5883C13.8002 12.3683 13.6202 12.1883 13.4002 12.1883ZM15.0002 4.18828C14.3377 4.18828 13.8002 4.72578 13.8002 5.38828C13.8002 5.56578 13.8402 5.73078 13.9102 5.88328L12.1002 6.96828C11.7152 7.19828 11.2177 7.06828 10.9952 6.67828L8.9577 3.11328C9.22519 2.89328 9.4002 2.56328 9.4002 2.18828C9.4002 1.52578 8.8627 0.988281 8.2002 0.988281C7.5377 0.988281 7.0002 1.52578 7.0002 2.18828C7.0002 2.56328 7.1752 2.89328 7.4427 3.11328L5.4052 6.67828C5.1827 7.06828 4.6827 7.19828 4.3002 6.96828L2.4927 5.88328C2.5602 5.73328 2.6027 5.56578 2.6027 5.38828C2.6027 4.72578 2.0652 4.18828 1.4027 4.18828C0.740195 4.18828 0.200195 4.72578 0.200195 5.38828C0.200195 6.05078 0.737695 6.58828 1.4002 6.58828C1.4652 6.58828 1.5302 6.57828 1.5927 6.56828L3.4002 11.3883H13.0002L14.8077 6.56828C14.8702 6.57828 14.9352 6.58828 15.0002 6.58828C15.6627 6.58828 16.2002 6.05078 16.2002 5.38828C16.2002 4.72578 15.6627 4.18828 15.0002 4.18828Z" fill="#A7A9AB" />
                </svg> */}
      {/* <svg width="18" height="15" viewBox="0 0 18 15" fill="none">
                    <path d="M3.44984 1.61349C3.44984 0.877704 4.05453 0.28125 4.79984 0.28125C5.54516 0.28125 6.14985 0.877704 6.14985 1.61349C6.14985 2.34927 5.54516 2.94572 4.79984 2.94572C4.05453 2.94572 3.44984 2.34927 3.44984 1.61349ZM3.67484 14.4918C3.17703 14.4918 2.77484 14.0949 2.77484 13.6036V7.41149L1.97131 8.73263C1.71537 9.15173 1.16244 9.28773 0.736342 9.03516C0.310248 8.78259 0.172436 8.23859 0.428655 7.81671L2.0675 5.12726C2.55547 4.32514 3.43297 3.83388 4.38078 3.83388H8.39985V1.61349C8.39985 0.877704 9.00453 0.281258 9.74985 0.281258H16.0499C16.7952 0.281258 17.3999 0.877704 17.3999 1.61349V7.83059C17.3999 8.5661 16.7952 9.16283 16.0499 9.16283H9.74985C9.00453 9.16283 8.39985 8.5661 8.39985 7.83059V6.49836H10.1998V7.38651H15.5999V2.05757H10.1998V3.83388H10.6498C11.1477 3.83388 11.5498 4.23078 11.5498 4.72204C11.5498 5.2133 11.1477 5.6102 10.6498 5.6102H6.82485V13.6036C6.82485 14.0949 6.42266 14.4918 5.92485 14.4918C5.42703 14.4918 5.02484 14.0949 5.02484 13.6036V10.051H4.57484V13.6036C4.57484 14.0949 4.17266 14.4918 3.67484 14.4918Z" fill="#A7A9AB" />
                </svg> */}
      {/* <div className=' cursor-pointer'>
                    <svg onClick={(e) => handlePrivateChat(participant.participant_id, participant.name, e)} width="16" height="16" viewBox="0 0 12 12" fill="none">
                        <path d="M10.5 0H1.5C0.672656 0 0 0.672656 0 1.5V8.25C0 9.07734 0.672656 9.75 1.5 9.75H3.75V11.7188C3.75 11.9484 4.0125 12.082 4.19766 11.9461L7.125 9.75H10.5C11.3273 9.75 12 9.07734 12 8.25V1.5C12 0.672656 11.3273 0 10.5 0Z" fill="#A7A9AB" />
                    </svg>
                </div>
                {participant.raiseHand ?
                    <svg onClick={() => handleRaiseHand(participant.participant_id)} className='cursor-pointer' width="16" height="16" viewBox="0 0 18 16" fill="none">
                        <path d="M16.3406 1.81269C15.3949 1.79863 14.625 2.558 14.625 3.50019H14.3438V2.40332C14.3438 1.47871 13.609 0.70527 12.6844 0.687692C11.7387 0.67363 10.9688 1.433 10.9688 2.37519V3.50019H10.6875V1.84082C10.6875 0.916208 9.95273 0.14277 9.02812 0.125192C8.08242 0.11113 7.3125 0.870505 7.3125 1.81269V3.50019H7.03125V2.40332C7.03125 1.47871 6.29648 0.70527 5.37188 0.687692C4.42617 0.67363 3.65625 1.433 3.65625 2.37519V7.15644L3.375 6.90683V5.21582C3.375 4.29121 2.64023 3.51777 1.71562 3.50019C0.769922 3.48613 0 4.2455 0 5.18769V7.52207C0 8.48535 0.411328 9.40293 1.13203 10.0463L5.05898 13.5373C5.41758 13.8572 5.625 14.3178 5.625 14.7994V15.035C5.625 15.5025 6.00117 15.8787 6.46875 15.8787H14.9062C15.3738 15.8787 15.75 15.5025 15.75 15.035V14.933C15.75 14.483 15.8414 14.0365 16.0137 13.6217L17.7363 9.533C17.9121 9.11816 18 8.67168 18 8.22168V3.52832C18 2.60371 17.2652 1.82675 16.3406 1.81269Z" fill="#9B9B9B" />
                    </svg>
                    :
                    null
                }
                <div className=' cursor-pointer' onClick={() => handleParticipantMic(participant.participant_id, participant.audio ? true : false)}>
                    {participant.audio ?
                        <svg width="16" height="16" viewBox="0 0 14 14" fill="none">
                            <path d="M7 9.625C8.44977 9.625 9.625 8.44977 9.625 7V2.625C9.625 1.17523 8.44977 0 7 0C5.55023 0 4.375 1.17523 4.375 2.625V7C4.375 8.44977 5.55023 9.625 7 9.625ZM11.375 5.25H10.9375C10.6958 5.25 10.5 5.44578 10.5 5.6875V7C10.5 9.04531 8.7366 10.6865 6.65027 10.483C4.83191 10.3056 3.5 8.67098 3.5 6.84414V5.6875C3.5 5.44578 3.30422 5.25 3.0625 5.25H2.625C2.38328 5.25 2.1875 5.44578 2.1875 5.6875V6.78562C2.1875 9.23672 3.93668 11.4218 6.34375 11.7537V12.6875H4.8125C4.57078 12.6875 4.375 12.8833 4.375 13.125V13.5625C4.375 13.8042 4.57078 14 4.8125 14H9.1875C9.42922 14 9.625 13.8042 9.625 13.5625V13.125C9.625 12.8833 9.42922 12.6875 9.1875 12.6875H7.65625V11.7641C9.99988 11.4425 11.8125 9.43086 11.8125 7V5.6875C11.8125 5.44578 11.6167 5.25 11.375 5.25Z" fill="#A7A9AB" />
                            micON
                        </svg>
                        :
                        <svg width="16" height="16" fill="none">
                            <path d="M17.8262 14.6848L13.388 11.2547C13.7421 10.5794 13.95 9.81669 13.95 9.00078V7.65078C13.95 7.40216 13.7486 7.20078 13.5 7.20078H13.05C12.8014 7.20078 12.6 7.40216 12.6 7.65078V9.00078C12.6 9.50478 12.4886 9.97953 12.2985 10.4127L11.5518 9.83553C11.6389 9.57116 11.7003 9.29497 11.7003 9.00106V4.50078C11.7003 3.00959 10.4914 1.80078 9.00026 1.80078C7.50907 1.80078 6.30026 3.00959 6.30026 4.50078V5.77653L1.27882 1.89556C1.08251 1.74312 0.799569 1.77828 0.647131 1.97459L0.0947563 2.68531C-0.0576812 2.88134 -0.0225249 3.164 0.173788 3.31672L16.7214 16.106C16.9177 16.2587 17.2004 16.2233 17.3531 16.027L17.9055 15.3162C18.0576 15.1202 18.0225 14.8376 17.8262 14.6848V14.6848ZM11.25 14.8508H9.67498V13.901C10.0029 13.856 10.3176 13.7733 10.6219 13.6673L9.2126 12.578C9.02388 12.5892 8.83544 12.6025 8.64026 12.5836C7.06948 12.4303 5.86319 11.2159 5.51332 9.71909L4.04998 8.58762V8.78028C4.04998 11.3014 5.84913 13.5489 8.32498 13.8903V14.8508H6.74998C6.50135 14.8508 6.29998 15.0522 6.29998 15.3008V15.7508C6.29998 15.9994 6.50135 16.2008 6.74998 16.2008H11.25C11.4986 16.2008 11.7 15.9994 11.7 15.7508V15.3008C11.7 15.0522 11.4986 14.8508 11.25 14.8508Z" fill="#A7A9AB" />
                            micOff
                        </svg>
                    }

                </div>
                <div className=' cursor-pointer' onClick={() => handleParticipantCam(participant.participant_id, participant.video ? true : false)}>
                    {participant.video ?
                        <svg width="16" height="16" viewBox="0 0 14 10" fill="none">
                            <path d="M8.17153 0.333984H1.16181C0.520139 0.333984 0 0.854123 0 1.49579V8.50551C0 9.14718 0.520139 9.66732 1.16181 9.66732H8.17153C8.8132 9.66732 9.33333 9.14718 9.33333 8.50551V1.49579C9.33333 0.854123 8.8132 0.333984 8.17153 0.333984ZM12.775 1.2503L10.1111 3.0878V6.9135L12.775 8.74857C13.2903 9.10343 14 8.74128 14 8.12148V1.87739C14 1.26003 13.2927 0.895443 12.775 1.2503Z" fill="#A7A9AB" />
                            CamOn
                        </svg>
                        :
                        <svg width="16" height="16" viewBox="0 0 25 21" fill="none">
                            <path d="M24.7576 18.3953L22.6092 16.7352C23.2108 16.6805 23.7498 16.2 23.7498 15.5203V5.48127C23.7498 4.48518 22.6131 3.90315 21.7811 4.47346L17.4998 7.42658V12.786L16.2498 11.8211V4.86799C16.2498 3.83674 15.4139 3.0008 14.3826 3.0008H4.83967L1.77717 0.633615C1.50373 0.422678 1.11311 0.469553 0.898264 0.74299L0.132639 1.72737C-0.0782988 2.0008 -0.0314238 2.39143 0.242014 2.60237L1.66779 3.70393L16.2498 14.9774L23.2225 20.368C23.4959 20.5789 23.8865 20.5321 24.1014 20.2586L24.867 19.2703C25.0819 19.0008 25.0311 18.6063 24.7576 18.3953ZM1.24983 16.1336C1.24983 17.1649 2.08576 18.0008 3.11701 18.0008H14.3826C14.8201 18.0008 15.2186 17.8446 15.5389 17.5906L1.24983 6.54377V16.1336Z" fill="#A7A9AB" />
                            CamOff
                        </svg>
                    }
                </div>

            </div> */}
    </div>
  )
}

export default memo(HostControl)
